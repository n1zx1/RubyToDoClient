(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(14),o=a.n(s),l=(a(32),a(3)),c=a(4),i=a(6),u=a(5),d=(a(33),a(20),a(56)),m=a(55),p=a(57);function v(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(a={path:"/"}).expires instanceof Date&&(a.expires=a.expires.toUTCString());var n=e+"="+encodeURIComponent(t);for(var r in a){n+="; "+r;var s=a[r];!0!==s&&(n+="="+s)}document.cookie=n}var h,f=a(10),E=a.n(f);function g(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(n,r){var s=new XMLHttpRequest;s.open(e,t,!0),s.responseType="json",s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Authorization","Token "+M("token")),s.onload=function(){s.status>=400?r(s.response):n(s.response)},s.onerror=function(){r(s.response)},s.send(JSON.stringify(a))}))}var k=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),n=t.call(this,e),h=e.parent,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{fixedtop:"true",collapseOnSelect:!0,expand:"md",bg:"danger",variant:"dark"},r.a.createElement(m.a,null,r.a.createElement(d.a.Brand,null,r.a.createElement("i",{className:"fas fa-list-alt"}),"RubyGarage ToDo List"),r.a.createElement("div",{className:"headerButtons"},r.a.createElement(p.a,{inline:"true",variant:"light",onClick:j},r.a.createElement("i",{className:"fas fa-plus"}),"Add TODO"),r.a.createElement(p.a,{inline:"true",variant:"light",onClick:T},"Exit")))))}}]),a}(n.Component);function T(){v("token","",{"max-age":-1}),localStorage.clear(),v("isLogined","false"),h.setState({logined:!1})}function j(){E()({text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u0434\u0430\u0447",content:"input",button:{text:"\u041e\u041a",closeModal:!0}}).then((function(e){e?function(e){g("POST","https://n1zx1.pythonanywhere.com/api/projects/",{name:e}).then((function(){E()({title:"\u041f\u0440\u043e\u0435\u043a\u0442 \u0431\u044b\u043b \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",icon:"success"}),localStorage.setItem("isLoaded","false"),J(h)}))}(e):E.a.close()}))}a(39);var b,y,O=a(7),w=(a(40),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),n=t.call(this,e),b=e.parent,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"RegistrationForm"},r.a.createElement("div",{className:"RegistrationFormName"},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),r.a.createElement("div",{className:"RegistrationFormForm"},r.a.createElement("input",{id:"login",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}),r.a.createElement("input",{type:"password",id:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement("input",{type:"password",id:"repeatPassword",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement("button",{onClick:I},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))}}]),a}(n.Component));function I(){var e=document.getElementById("login"),t=document.getElementById("password"),a=document.getElementById("repeatPassword");0===e.value.length||0===t.value.length||0===a.value.length?(alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f!"),e.value="",t.value="",a.value=""):(v("token","3878ea14a5bf6b86ae22e12a360d981155d3e657"),(document.getElementById("password").value.length<4?(alert("\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 4 \u0438 \u0431\u043e\u043b\u0435\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),document.getElementById("password").value="",document.getElementById("repeatPassword").value="",0):document.getElementById("password").value===document.getElementById("repeatPassword").value||(alert("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!"),document.getElementById("password").value="",document.getElementById("repeatPassword").value="",0))&&(e.value,t.value,new Promise((function(e,t){g("POST","https://n1zx1.pythonanywhere.com/api/users/",{username:document.getElementById("login").value,password:document.getElementById("password").value}).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))).then((function(e){var t=document.getElementById("login"),a=document.getElementById("password");v("isLogined","true"),N(t.value,a.value).then((function(e){v("token",e.token),b.setState({logined:!0})}))})).catch((function(){alert("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!"),e.value="",t.value="",a.value=""})))}function N(e,t){return new Promise((function(e,t){g("POST","https://n1zx1.pythonanywhere.com/api/token",{username:document.getElementById("login").value,password:document.getElementById("password").value}).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}var x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),n=t.call(this,e),y=e.parent,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"LoginForm"},r.a.createElement("div",{className:"LoginFormName"},r.a.createElement("h1",null,"\u0412\u0445\u043e\u0434")),r.a.createElement("div",{className:"LoginFormForm"},r.a.createElement("input",{id:"login",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}),r.a.createElement("input",{type:"password",id:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement("button",{onClick:P},"\u0412\u043e\u0439\u0442\u0438")))}}]),a}(n.Component);function P(){var e=document.getElementById("login").value,t=document.getElementById("password").value;e.length<=0||t.length<=0?alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f"):(v("token","\t3878ea14a5bf6b86ae22e12a360d981155d3e657"),N().then((function(e){v("token",e.token),v("isLogined","true"),y.setState({logined:!0})})).catch((function(e){alert("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"),document.getElementById("login").value="",document.getElementById("password").value=""})))}var B,S=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isRegistered:!0},n.parent=e.parent,n.notRegistered=n.notRegistered.bind(Object(O.a)(n)),n.Registered=n.Registered.bind(Object(O.a)(n)),n}return Object(c.a)(a,[{key:"notRegistered",value:function(){this.setState({isRegistered:!1})}},{key:"Registered",value:function(){this.setState({isRegistered:!0})}},{key:"render",value:function(){return this.state.isRegistered?r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{parent:this.parent}),r.a.createElement("button",{className:"changeForm",onClick:this.notRegistered},"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?")):r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{parent:this.parent}),r.a.createElement("button",{className:"changeForm",onClick:this.Registered},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"))}}]),a}(n.Component),C=(a(41),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).Text=e.Text,n.state={isDone:e.isDone,isLoaded:!1},n.isDoneFun=n.isDoneFun.bind(Object(O.a)(n)),n.editTask=n.editTask.bind(Object(O.a)(n)),n.deleteTask=n.deleteTask.bind(Object(O.a)(n)),n.moveUp=n.moveUp.bind(Object(O.a)(n)),n.moveDown=n.moveDown.bind(Object(O.a)(n)),n.Project=e.Project,n.Url=e.url,n.parent=e.parent,n.deadline=e.deadline,null!==n.deadline&&(n.Text=n.Text+" \u0434\u043e "+n.deadline),n}return Object(c.a)(a,[{key:"moveUp",value:function(){var e=this;g("POST",this.Project.Url+"move_task/",{index:this.props.index,up:!0}).then((function(t){localStorage.setItem("isLoaded","false"),J(e.parent)}))}},{key:"moveDown",value:function(){var e=this;g("POST",this.Project.Url+"move_task/",{index:this.props.index,up:!1}).then((function(t){localStorage.setItem("isLoaded","false"),J(e.parent)}))}},{key:"editTask",value:function(){var e=this;E()({text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u0437\u0430\u0434\u0430\u0447\u0438",content:"input",button:{text:"\u041e\u041a",closeModal:!0}}).then((function(t){t?g("PATCH",e.Url,{text:t}).then((function(t){e.Text=t.text,null!==e.deadline&&(e.Text=e.Text+" \u0434\u043e "+e.deadline),localStorage.setItem("isLoaded","false"),J(e.parent),E()({title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e!",icon:"success"})})):E.a.close()}))}},{key:"deleteTask",value:function(){var e=this;g("DELETE",this.Url).then((function(){g("GET",e.Project.Url).then((function(t){e.Project.Tasks=t.tasks,localStorage.setItem("isLoaded","false"),J(e.parent),E()({title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e!",icon:"success"})}))}))}},{key:"isDoneFun",value:function(){var e=this;g("PATCH",this.Url,{text:this.Text,is_done:!0}).then((function(){e.setState({isDone:!0}),localStorage.setItem("isLoaded","false"),J(e.parent),E()({title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0441\u0434\u0435\u043b\u0430\u043d\u043e!",icon:"success"})}))}},{key:"render",value:function(){return this.state.isDone?r.a.createElement("div",{className:"Task"},r.a.createElement("div",{className:"TaskWrap"},r.a.createElement("div",{className:"TaskText"},r.a.createElement("p",{className:"doneStatus"},"Done"),r.a.createElement("p",null,this.Text)),r.a.createElement("div",{className:"TaskButtons"},r.a.createElement("i",{onClick:this.moveUp,className:"fas fa-sort-up"}),r.a.createElement("i",{onClick:this.moveDown,className:"fas fa-sort-down"}),r.a.createElement("i",{onClick:this.editTask,className:"far fa-edit"}),r.a.createElement("i",{onClick:this.deleteTask,className:"far fa-trash-alt"}))),r.a.createElement("hr",{className:"TaskHr"})):r.a.createElement("div",{className:"Task"},r.a.createElement("div",{className:"TaskWrap"},r.a.createElement("div",{className:"TaskText"},r.a.createElement("input",{type:"checkbox",onClick:this.isDoneFun}),r.a.createElement("p",null,this.Text)),r.a.createElement("div",{className:"TaskButtons"},r.a.createElement("i",{onClick:this.moveUp,className:"fas fa-sort-up"}),r.a.createElement("i",{onClick:this.moveDown,className:"fas fa-sort-down"}),r.a.createElement("i",{onClick:this.editTask,className:"far fa-edit"}),r.a.createElement("i",{onClick:this.deleteTask,className:"far fa-trash-alt"}))),r.a.createElement("hr",{className:"TaskHr"}))}}]),a}(n.Component)),L=(a(42),a(11)),D=a.n(L),R=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).Name=e.Name,n.Url=e.url,n.state={isLoaded:!1},n.parent=e.parent,n.deleteProject=n.deleteProject.bind(Object(O.a)(n)),n.editProject=n.editProject.bind(Object(O.a)(n)),n.addTask=n.addTask.bind(Object(O.a)(n)),n.customTask=n.customTask.bind(Object(O.a)(n)),n.inputId="newTaskInput"+n.Name,n}return Object(c.a)(a,[{key:"customTask",value:function(){var e=this;D()(r.a.createElement("div",{className:"swal"},r.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"),r.a.createElement("input",{id:"swalInput"}),r.a.createElement("p",null,"\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u0434\u0435\u0434\u043b\u0430\u0439\u043d \u0434\u043b\u044f \u0437\u0430\u0434\u0430\u0447\u0438"),r.a.createElement("input",{id:"swalDate",type:"date"})),{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"}).then((function(){(console.log(),!0===Boolean(document.getElementById("swalInput").value))?!0===Boolean(document.getElementById("swalDate").value)?g("POST",e.Url+"create_task/",{text:document.getElementById("swalInput").value,deadline:document.getElementById("swalDate").value}).then((function(t){localStorage.setItem("isLoaded","false"),J(e.parent),document.getElementById(e.inputId).value="",D()({title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e!",icon:"success"})})):alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0435\u0434\u043b\u0430\u0439\u043d!"):alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438!")}))}},{key:"addTask",value:function(){var e=this,t=document.getElementById(this.inputId).value;t?g("POST",this.Url+"create_task/",{text:t}).then((function(t){localStorage.setItem("isLoaded","false"),J(e.parent),document.getElementById(e.inputId).value="",D()({title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e!",icon:"success"})})).catch((function(){D()({title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!",icon:"error"})})):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u043d\u0438\u044f!")}},{key:"editProject",value:function(){var e=this;D()({text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u043e\u0435 \u0438\u043c\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u0434\u0430\u0447",content:"input",button:{text:"\u041e\u041a",closeModal:!0}}).then((function(t){t?g("PUT",e.Url,{name:t}).then((function(t){e.Name=t.name,localStorage.setItem("isLoaded","false"),J(e.parent),D()({title:"\u041f\u0440\u043e\u0435\u043a\u0442 \u0431\u044b\u043b \u0438\u0437\u043c\u0435\u043d\u0435\u043d",icon:"success"})})):D.a.close()}))}},{key:"deleteProject",value:function(){var e=this;g("DELETE",this.Url).then((function(){localStorage.setItem("isLoaded","false"),J(e.parent),D()({title:"\u041f\u0440\u043e\u0435\u043a\u0442 \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d",icon:"success"})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Project"},r.a.createElement("div",{className:"ProjectTitle"},this.Name,r.a.createElement("div",{className:"TitleButtons"},r.a.createElement("i",{onClick:this.editProject,className:"far fa-edit"}),r.a.createElement("i",{onClick:this.deleteProject,className:"far fa-trash-alt"}))),r.a.createElement("div",{className:"AddNewTask"},r.a.createElement("i",{onClick:this.customTask,title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438",className:"fas fa-plus AdditionalProps"}),r.a.createElement("input",{id:this.inputId,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435"}),r.a.createElement("button",{onClick:this.addTask},"Add Task")),r.a.createElement("div",{className:"ProjectTasks"},r.a.createElement(U,{Tasks:this.props.Tasks,Project:this,parent:this.parent})))}}]),a}(n.Component);function U(e){var t=[];for(var a in e.Tasks)t[a]=r.a.createElement(F,{key:e.Tasks[a].url,url:e.Tasks[a].url,Text:e.Tasks[a].text,isDone:e.Tasks[a].is_done,Project:e.Project,parent:e.parent,deadline:e.Tasks[a].deadline,index:a});return t}function F(e){return r.a.createElement(C,{Text:e.Text,Project:e.Project,url:e.url,isDone:e.isDone,parent:e.parent,deadline:e.deadline,index:e.index})}var A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),n=t.call(this,e),B=e.parent,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(H,{Projects:localStorage.getItem("projects")}))}}]),a}(n.Component);function H(e){var t=JSON.parse(e.Projects),a=[];for(var n in t)a[n]=r.a.createElement(_,{url:t[n].url,key:t[n].url,Name:t[n].name,Tasks:t[n].tasks});return a}function _(e){return r.a.createElement(R,{url:e.url,parent:B,Name:e.Name,Tasks:e.Tasks})}var z=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={loaded:!1,logined:!1},localStorage.setItem("isLoaded","false"),e}return Object(c.a)(a,[{key:"render",value:function(){return!0===this.state.logined?r.a.createElement("div",{onLoad:J(this)},r.a.createElement(k,{parent:this}),r.a.createElement("div",{className:"App"},r.a.createElement(A,{parent:this}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{parent:this}))}}]),a}(n.Component);function J(e){"true"!==localStorage.getItem("isLoaded")&&g("GET","https://n1zx1.pythonanywhere.com/api/projects").then((function(t){localStorage.setItem("projects",JSON.stringify(t)),e.setState({loaded:!0}),localStorage.setItem("isLoaded","true")}))}function M(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.5ee68331.chunk.js.map